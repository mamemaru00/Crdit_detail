# 制約事項・前提条件

## 9. 制約事項・前提条件

### 9.1 システム制約事項

#### 9.1.1 Google Sheets API制約
- **読み書き回数制限**: 1プロジェクトあたり100リクエスト/100秒/ユーザー
- **セル更新制限**: 1リクエストあたり最大10,000セル
- **対応策**: batchUpdate APIで一括更新、エラー時は自動リトライ

#### 9.1.2 CSVファイル制約
- **ファイルサイズ**: 最大10MB
- **エンコーディング**: UTF-8、Shift-JIS対応
- **必須カラム**: 利用日、店舗名、金額の3列
- **日付形式**: YYYY/MM/DD、YYYY-MM-DD形式

#### 9.1.3 データ処理制約
- **処理件数**: 1回の取込で最大1,000件
- **マッピング登録数**: 最大500件
- **カテゴリ数**: 最大21カテゴリ（B～V列）
- **対象年**: 2020年～2030年

### 9.2 前提条件

#### 9.2.1 Google Cloud環境
- Google Cloudプロジェクト作成済み
- Google Sheets API有効化済み
- サービスアカウント作成済み
- credentials.jsonダウンロード済み

#### 9.2.2 スプレッドシート要件
- 年別シート構成（例: 2024年シート）
- 1行目: ヘッダー行
- 2～13行目: 1月～12月の月別データ
- B～V列: カテゴリ別支払額列
- サービスアカウントに編集権限付与済み

**スプレッドシート構成例:**
```
     A列   B列      C列     D列
1行  月    日用品   食費    交通費
2行  1月   0        0       0
3行  2月   0        0       0
...
13行 12月  0        0       0
```

#### 9.2.3 開発環境
- Python 3.10以上インストール済み
- pip利用可能
- インターネット接続環境
- Webブラウザ（Chrome、Edge、Firefox推奨）

#### 9.2.4 クレジットカード明細CSV
- 金融機関からダウンロード可能
- 利用日、店舗名、金額を含む
- 定期的にダウンロード可能

### 9.3 運用上の制約

#### 9.3.1 セキュリティ
- credentials.jsonはローカル保管のみ
- スプレッドシートIDは外部公開禁止
- サービスアカウントの最小権限運用

#### 9.3.2 データ整合性
- 同一月の重複取込は金額が加算される
- 手動編集したスプレッドシートデータは保持される
- マッピング変更は過去データに影響しない

#### 9.3.3 ユーザー責任
- CSVファイルの正確性はユーザーが保証
- スプレッドシートのバックアップはユーザーが実施
- マッピング設定の妥当性はユーザーが判断

### 9.4 非対応事項

- リアルタイム連携（手動実行のみ）
- 複数ユーザー同時利用
- モバイルアプリ版
- 自動カテゴリ推定（AI機能）
- 予算管理・分析機能
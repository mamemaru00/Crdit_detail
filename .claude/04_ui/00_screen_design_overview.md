# 画面設計概要

## 1. メイン画面（index.html）

### レイアウト構成
```
【イオンカード明細取込システム】

┌─ CSVファイル選択 ─────────────┐
│ [ファイルを選択] meisai202510.csv │
│ [プレビュー]                      │
│                                   │
│ 【プレビュー】                    │
│ 2025/07/28 | アイビ－ビ－シヨツプ | 1,890円 │
│ 2025/08/03 | ジヤランネツト     | 1,000円 │
│ ...                               │
└───────────────────────────────┘

┌─ スプレッドシート設定 ─────────┐
│ スプレッドシートID:               │
│ [10RJcB-_pOqsxA-6mGZ...]          │
│                                   │
│ 対象年: [2025年 ▼]              │
│                                   │
│ ℹ️ サービスアカウント:            │
│   creditapi@creditapi-470614...   │
└───────────────────────────────┘

┌─ カテゴリ設定 ─────────────────┐
│ [マッピング管理を開く]            │
│                                   │
│ 登録済み: 15店舗                  │
│ デフォルト列: B列（支払額）       │
└───────────────────────────────┘

[取込実行]

┌─ 処理結果 ─────────────────────┐
│ 【処理完了】                      │
│                                   │
│ 2025年8月:                       │
│  ├ 外食費(C列): +11,560円 (8件)  │
│  ├ 日用品費(D列): +7,045円 (5件) │
│  ├ 娯楽費(G列): +3,100円 (3件)   │
│  └ 交通費(N列): +5,870円 (1件)   │
│                                   │
│ 合計: 17件 / 27,575円             │
│                                   │
│ ⚠ 未登録店舗: 2件                │
│  - デイーエムエム (300円)         │
│  - ル－プ (143円)                 │
│  → デフォルト列(B列)に振り分け済み│
│                                   │
│ [未登録店舗を登録]                │
│ [詳細ログをダウンロード]          │
└───────────────────────────────┘
```

### 主要機能
- CSVファイル選択とプレビュー表示
- スプレッドシート設定（ID、対象年）
- サービスアカウント情報の表示
- 取込実行と結果表示
- 月別・カテゴリ別の処理サマリー
- 未登録店舗リストの表示

## 2. マッピング管理画面（mapping.html）

### レイアウト構成
```
【店舗カテゴリマッピング管理】

┌─ 検索 ─────────────────────────┐
│ 🔍 [店舗名で検索]                 │
└───────────────────────────────┘

┌─ マッピング一覧 ───────────────┐
│ 店舗名パターン │カテゴリ│列│操作│
│ ユシンヤ      │外食費  │C │編集削除│
│ AMAZON        │日用品費│D │編集削除│
│ スイカ        │交通費  │N │編集削除│
│ トモズ        │日用品費│D │編集削除│
│ ...                             │
│                                 │
│ [+ 新規追加]                    │
│ [インポート] [エクスポート]     │
└─────────────────────────────┘

【新規マッピング追加】
店舗名パターン: [____________]
一致方法: [部分一致 ▼]
カテゴリ: [外食費 ▼]
列: [C ▼]
[登録] [キャンセル]
```

### 主要機能
- 店舗名検索機能
- マッピング一覧表示（ページング対応）
- 新規マッピング追加フォーム
- 編集・削除機能
- インポート・エクスポート機能

## 3. 未登録店舗確認画面

### レイアウト構成
```
【未登録店舗の振り分け】

以下の店舗がマッピングに登録されていません。
カテゴリを選択して登録してください。

┌──────────────────────────────┐
│ デイーエムエム (300円)           │
│ カテゴリ: [娯楽費 ▼] 列: [G]    │
│ [今回のみ] [登録して適用]       │
├──────────────────────────────┤
│ ル－プ (143円)                  │
│ カテゴリ: [外食費 ▼] 列: [C]    │
│ [今回のみ] [登録して適用]       │
└──────────────────────────────┘

[一括でデフォルト列に振り分け]
[キャンセル]
```

### 主要機能
- 未登録店舗一覧表示
- 各店舗へのカテゴリ選択
- 今回のみ適用 or 登録して適用の選択
- 一括デフォルト列振り分け

## 4. 技術仕様

### UIフレームワーク
- Bootstrap 5.3（レスポンシブデザイン）
- Jinja2テンプレートエンジン
- JavaScript（インタラクティブ操作）

### デザイン方針
- シンプルで直感的なUI
- モバイル対応（レスポンシブ）
- 視認性の高い配色
- 処理結果の明確な表示
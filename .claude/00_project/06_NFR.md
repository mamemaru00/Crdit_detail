# 非機能要件定義書

## 1. パフォーマンス要件

### 1.1 処理時間
- CSVファイルアップロードから処理完了まで10秒以内（50件以下の明細データ）
- Google Sheets API呼び出しのレスポンスタイム5秒以内
- カテゴリ判定処理は1件あたり10ms以内

### 1.2 スループット
- 月間利用明細50件程度を想定
- 同時処理は単一ユーザーのみ

## 2. セキュリティ要件

### 2.1 認証・認可
- Googleサービスアカウント認証を使用
- 認証情報（service_account.json）は環境変数またはセキュアな設定ファイルで管理
- 認証情報ファイルはGit管理対象外（.gitignoreに追加）

### 2.2 データ保護
- CSVファイルは処理後、サーバー上から削除
- マッピングテーブルはユーザーごとに分離
- ローカル環境（Docker）で動作し、外部公開しない

### 2.3 アクセス制御
- スプレッドシートへのアクセスはサービスアカウント経由のみ
- サービスアカウントに必要最小限の権限（編集者）を付与

## 3. 可用性要件

### 3.1 稼働環境
- ローカルDocker環境で動作
- インターネット接続が必要（Google Sheets API利用のため）

### 3.2 影響範囲
- システムダウン時の影響範囲は個人利用のみ
- 24時間365日稼働は不要

## 4. 保守性要件

### 4.1 ログ管理
- エラー発生時の調査を容易にするログ出力機能
- 処理詳細ログのダウンロード機能

### 4.2 設定管理
- マッピングテーブルをJSON形式で管理し、編集を容易に
- インポート・エクスポート機能で設定のバックアップ可能

### 4.3 コード品質
- コードに適切なコメントを記載
- Pythonコーディング規約に準拠

## 5. 拡張性要件

### 5.1 データ量
- 初期想定：月間50件、年間600件の明細データ
- 将来的な増加に対応可能な設計

### 5.2 機能拡張
- マッピングテーブルのSQLite移行が可能な設計
- REST API化への対応を考慮

## 6. 運用要件

### 6.1 実行環境
- Docker Desktop 4.44以上
- メモリ：最低4GB推奨
- ストレージ：1GB以上の空き容量

### 6.2 依存関係
- Google Cloud Project（creditapi-470614）
- Google Sheets API有効化済み
- サービスアカウント作成済み
- スプレッドシートへのサービスアカウント共有設定

### 6.3 バックアップ
- マッピングテーブルの定期バックアップ推奨
- 認証情報ファイルのバックアップ手順の文書化